<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
    <h1>Speech color changer</h1>
    <p>Tap/click then say a color to change the background color of the app.</p>
    <div class="hints"></div>
    <div>
        <p class="output"><em>...diagnostic messages</em></p>
    </div>

    <script>
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const SpeechGrammarList = window.SpeechGrammarList || window.webkitSpeechGrammarList;
        const SpeechRecognitionEvent = window.SpeechRecognitionEvent || window.webkitSpeechRecognitionEvent;
        const colors = [
            "aqua",
            "azure",
            "beige",
            "bisque",
            "black",
            "blue",
            "brown",
            "chocolate",
            "coral" /* add more colors here */,
        ];
        const grammar = `#JSGF V1.0; grammar colors; public <color> = ${colors.join(" | ")};`;

        const recognition = new SpeechRecognition();
        const speechRecognitionList = new SpeechGrammarList();
        speechRecognitionList.addFromString(grammar, 1);

        recognition.grammars = speechRecognitionList;
        recognition.continuous = false;
        recognition.lang = "en-US";
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;

        const diagnostic = document.querySelector(".output");
        const bg = document.querySelector("html");
        const hints = document.querySelector(".hints");

        let colorHTML = "";
        colors.forEach((color, i) => {
            console.log(color, i);
            colorHTML += `<span style="background-color:${color};"> ${color} </span>`;
        });
        hints.innerHTML = `Tap or click then say a color to change the background color of the app. Try ${colorHTML}.`;

        document.body.onclick = () => {
            recognition.start();
            console.log("Ready to receive a color command.");
        };
        recognition.onerror = (error) => {
            console.log(error);
        };

        recognition.onspeechend = () => {
            recognition.stop();
        };

        recognition.onnomatch = (event) => {
            diagnostic.textContent = "I didn't recognize that color.";
        };
    </script>
</body>
</html>
